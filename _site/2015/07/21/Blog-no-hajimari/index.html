<!DOCTYPE html>
<html>
<head>
  <title>Blogの始まり</title>
  
  <meta name="keywords" content="github,markdown,jekyll">
  
  
  <meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;首先感谢&lt;a href=&quot;http://harttle.github.io&quot;&gt;Harttle&lt;/a&gt;这套blog代码.
如何使用Github和Jekyll搭建Blog的文章网上已经很多, 就不赘述了, 姑且记录一些自己遇到的问题.&lt;/p&gt;
&lt;/blockquote&gt;
">
  
  <meta name="author" content="harttle">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="/assets/img/favicon.png">
  <link rel="stylesheet" href="/assets/lib/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/lib/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/assets/lib/buttons/css/buttons.css">
  <link rel="stylesheet" href="/assets/css/sticky-footer-navbar.css">
  <link rel="stylesheet" href="/assets/css/main.css">

  <!--reliance-->
  <script src="/assets/lib/jquery/jquery-2.0.3.min.js"></script>
</head>

<body>
<!-- Wrap all page content here -->
<div id="wrap">
  <!-- Navbar -->

  <div class="navbar navbar-default navbar-inverse global-nav "> <!-- navbar-fixed-top 固定navbar在顶部-->
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Tokinonagare</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li id="archive"><a href="/date.html">Archive</a></li>
          <li id="timeline"><a href="/timeline.html">Timeline</a></li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li id="about"><a href="/about.html">About</a></li>
             <!--  <li id="album"><a href="/album.html">Album</a></li> -->
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav pull-right">
          <form class="navbar-form navbar-right" role="search" action="http://google.com/search" method="get">
            <input type="hidden" name="q" value="site:tokinonagare.github.io">

            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for ..." name="q">
              <span class="input-group-btn">
                <button type="submit" class="button button-rounded button-flat-blue">Go</button>
              </span>
            </div>
          </form>
        </ul>
      </div>
      <!--/.nav-collapse -->
    </div>
  </div>
  <!-- Begin page content -->
  <div id="main-content">
    <style>
.headerbar{
  background: white;
  border-bottom: 2px solid #eaeaeb;
}
.headerbar .page-header{
  border-bottom: 0;
  margin-bottom: 0px;
  margin-top: 0px;
}
#page-content{
  margin-bottom: 15px;
}
@media (max-width: 768px){
  .header{
    font-size: 18px;
    line-height: 20px;
  }
  .meta{
    display: none;
  }
}
</style>

<div class="headerbar">
  <div class="page-header container-fluid">
    <h3 class="header">
      Blogの始まり <small>GitHub 博客搭建问题问题记录</small>
    </h3>
    <div>
        <div class="pull-left meta">
            

<span class="label label-blue" style="margin-right: 10px;">
    <span class="glyphicon glyphicon-folder-open"></span>
    <a href="/category.html#category-web"> Web</a>
</span>


            

<span class="label label-yellow" style="margin-right: 10px;">
    <span class="glyphicon glyphicon-tag"></span>
    <a href="/tag.html#tag-github">Github</a>
</span>

<span class="label label-yellow" style="margin-right: 10px;">
    <span class="glyphicon glyphicon-tag"></span>
    <a href="/tag.html#tag-markdown">Markdown</a>
</span>

<span class="label label-yellow" style="margin-right: 10px;">
    <span class="glyphicon glyphicon-tag"></span>
    <a href="/tag.html#tag-jekyll">Jekyll</a>
</span>


        </div>
        <div class="pull-right text-muted">
            <span class="widget-date">

  <a data-date=" 2015-07-21"
     href="/date.html#date-2015-07" >
    <i class="glyphicon glyphicon-time"></i>
    21 Jul 2015
  </a>
</span>

        </div>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div id="page-content">
    <link rel="stylesheet" href="/assets/css/markdown.css">
<link rel="stylesheet" href="/assets/css/monokai-syntax.css">
<style>
.sidebar{ width: 200px; margin-top:20px; border:1px solid #eaeaeb;}
.sidebar ul{margin-top: 0;margin-bottom:0;}
.sidebar.affix { position: fixed; top: 0px; } /* 控制affix位置*/
.sidebar.affix-bottom { position: absolute;}

.sidebar .nav .nav { display: none;}
.sidebar .nav > .active > ul { display: block; }
.sidebar .nav > li > a {
  display: block; padding: 5px 15px; color: #428bca; text-decoration: none;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.sidebar .nav > li > a:hover{ text-decoration: none; background-color: #ffc; border-left: 2px solid #c03; }
.sidebar .nav .nav > li > a { padding-top:3px; padding-bottom:3px; margin-right: 10px; font-size: 90%; }
.sidebar .nav .nav .nav > li > a { margin-right: 20px; }
.sidebar .nav .nav .nav .nav > li > a { margin-right: 30px; }
.sidebar .nav .nav .nav .nav .nav > li > a { margin-right: 40px; }
.sidebar .nav .nav .nav .nav .nav .nav> li > a { margin-right: 50px; }
.sidebar .nav > .active > a, .sidebar .nav > .active:hover > a, .sidebar .nav > .active:focus > a {
    margin-bottom:1px; padding-bottom: 2px!important;
    font-weight: bold;
    color: white;
    background: #428bca;
    border-left: 2px solid #c03;
    text-shadow: 0 1px 0 rgba(0,0,0,.15);
    -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
       -moz-box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
            box-shadow: inset 1px 0 0 rgba(0,0,0,.1), inset -1px 0 0 rgba(0,0,0,.1);
}
.sidenav { margin-top: 20px; margin-bottom: 20px; background: #fff; }

.MathJax *{ color: black!important;  }
.md{ margin-top:20px; padding:80px; }
  @media (max-width: 768px){
    .md{
      padding: 20px 20px 40px;
    }
  }
</style>

<div class="row post-display">
    <div class="col-lg-10 col-md-9 col-sm-8 left">
        <div class="md paper">
            <blockquote>
<p>首先感谢<a href="http://harttle.github.io">Harttle</a>这套blog代码.
如何使用Github和Jekyll搭建Blog的文章网上已经很多, 就不赘述了, 姑且记录一些自己遇到的问题.</p>
</blockquote>

<h1>域名DNS问题</h1>

<blockquote>
<p>由于是第一次使用非ip解析域名, 当使用<code>CNAME</code>记录将<code>tokinonagare.com</code>解析到<code>tokinonagare.github.io</code>时, <a href="https://www.cloudflare.com">Cloudflare</a>上出现一个&quot;!&quot;的警告, 并且无法连接<code>tokinonagare.com.</code></p>
</blockquote>

<ol>
<li>需在项目文件夹中新建<code>CNAME</code>文件, 写入<code>tokinonagare.com</code>;</li>
<li>因为是顶级域名, 需在DNS使用<code>ALIAS</code>记录, 然而<a href="https://www.cloudflare.com">Cloudflare</a>没有这个记录选项, 所以需直接用<code>A</code>记录到两个ip:<code>192.30.252.153</code>&amp;<code>192.30.252.154</code><strong>注: ip会更改</strong>;</li>
<li>如果不使用<code>A</code>记录, 使用<code>CNAME</code>记录到<code>tokinonagare.com</code>访问正常, 按照Github的说法会出现邮件的解析问题(未验证);</li>
</ol>

<ul>
<li>参考: <a href="https://help.github.com/articles/my-custom-domain-isn-t-working/">https://help.github.com/articles/my-custom-domain-isn-t-working/</a></li>
<li>参考: <a href="http://justcoding.iteye.com/blog/1959737">http://justcoding.iteye.com/blog/1959737</a></li>
</ul>

<!-- more -->

<h1>目录摘要显示</h1>

<blockquote>
<p>源代码中目录页面中的每篇Blog文章占据了太大的篇幅, 秉着使用尽量少的操作浏览尽量多的内容, 故进行修改.</p>
</blockquote>

<p>①首先尝试CSS, 添加行高限制, 隐藏溢出内容, 然而会出现部分最后一行行显示半截, 故舍弃;</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#posts &gt; div.post.paper{</span>
    <span class="n">height</span><span class="o">-</span><span class="nl">line</span><span class="p">:</span> <span class="mi">150</span><span class="o">%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span>  <span class="mi">40</span><span class="n">em</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>②考虑<code>jekyll</code>对于这种问题应该会做处理, 于是去查看源码;</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">content</span> <span class="o">|</span> <span class="nl">split</span><span class="p">:</span><span class="s">&quot;&lt;!-- more --&gt;&quot;</span> <span class="o">|</span> <span class="n">first</span> <span class="p">}}</span>
</code></pre></div>
<p><code>&lt;!-- more --&gt;</code>是一个分割标签, 该段代码含义: 显示从文章开始到该标签的内容;</p>

<p>③用字数进行限制, 然而这样会导致HTML的内容也会显示出来;</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">content</span> <span class="o">|</span> <span class="nl">truncatewords</span><span class="p">:</span> <span class="mi">300</span> <span class="p">}}</span>
</code></pre></div>
<p>④使用摘要显示</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">excerpt</span> <span class="p">}}</span>
</code></pre></div>
<p>需在<code>_config.yml</code>中添加: <code>excerpt_separator: &quot;&lt;!-- more --&gt;&quot;</code></p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="o">---</span>
<span class="nl">excerpt</span><span class="p">:</span> <span class="s">&quot;摘要内容&quot;</span>
<span class="o">---</span>
</code></pre></div>
<p>需要手动添加内容, 对于懒人来说太困难了<em>(:з」∠)</em></p>

<ul>
<li>参考: <a href="http://mikeygee.com/blog/truncate.html">http://mikeygee.com/blog/truncate.html</a></li>
<li>参考: <a href="https://blog.omgmog.net/post/adding-support-for-more-tag-to-jekyll-without-plugins/">https://blog.omgmog.net/post/adding-support-for-more-tag-to-jekyll-without-plugins/</a></li>
<li>参考: <a href="http://jekyllrb.com/docs/posts/#post-excerpts">http://jekyllrb.com/docs/posts/#post-excerpts</a></li>
<li>参考: <a href="https://truongtx.me/2013/05/01/jekyll-read-more-feature-without-any-plugin/">https://truongtx.me/2013/05/01/jekyll-read-more-feature-without-any-plugin/</a></li>
</ul>

<h1>敏感词处理</h1>

<blockquote>
<p>Liquid Exception: undefined method `split&#39; for nil:NilClass</p>
</blockquote>

<p>如果直接写入<code>{{ post.content | split:&#39;&lt;!-- more --&gt;&#39; | first }}</code>会出现报错, 需要添加<code>{% raw %}</code>和<code>{% endraw %}</code>;</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="p">{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">content</span> <span class="o">|</span> <span class="nl">split</span><span class="p">:</span><span class="s">&quot;&lt;!-- more --&gt;&quot;</span> <span class="o">|</span> <span class="n">first</span> <span class="p">}}</span>
  <span class="p">{</span><span class="o">%</span> <span class="n">endraw</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>然而我在写入<code>{% raw %}</code>和<code>{% endraw %}</code>自身时, 又遇到了问题, 方法是拆分掉<code>{%</code>;</p>

<p><code>{% raw %}</code>:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="p">{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endraw</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p><code>{% endraw %}</code>:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="p">{</span><span class="o">%</span> <span class="n">raw</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span><span class="p">{</span><span class="o">%</span> <span class="n">endraw</span> <span class="o">%</span><span class="p">}</span><span class="n">endraw</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<ul>
<li>参考: <a href="https://github.com/jekyll/jekyll/issues/3381">https://github.com/jekyll/jekyll/issues/3381</a></li>
<li>参考: <a href="http://blog.slaks.net/2013-06-10/jekyll-endraw-in-code/">http://blog.slaks.net/2013-06-10/jekyll-endraw-in-code/</a></li>
</ul>

        </div>

        <ul class="pager" style="margin: 30px 0 0">
    
    
</ul>


        <hr style="margin: 20px 0;"/>


<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'Tokinonagare'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  $(function () {
//    setTimeout(function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
//    }, 3000);
  });
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

    </div>
    <div class="col-lg-2 col-md-3 col-sm-4 hidden-xs right" >
      <div class="sidebar"></div>
    </div>
</div>

<script>
  $(function(){
    var toc = getTOC($('.post-display .left'));
    if (toc != null) {
      $('.sidebar').append(toc);

      //sidebar affix, this offset is for sidebar position recognition
      setTimeout(function () {
          var $sideBar = $('.sidebar');
          $sideBar.affix({
              offset: {
                  top: function () {
                      var offsetTop      = $sideBar.offset().top;
                      return (this.top = offsetTop - 20); //负值越大越在下方freeze
                  },
                  bottom: function(){
                    return (this.bottom = $(document).height() - $('.md').offset().top - $('.md').height());
                  }
              }
          });
      },100);
    
      //sidebar scroll spy
      $('body').scrollspy({
        target: '.sidebar',
        offset: 10  //make sure to spy the element when scrolled to
      });
    }
    else{
      $('.post-display .left').removeClass('col-lg-10 col-md-9 col-sm-8');
      $('.post-display').removeClass('row-fluid');
      $('.post-display .right').remove();
    }

    $(window).resize(function(){
        $('body').scrollspy('refresh');
    });

  });

  //生成目录
  function getTOC($content) {
    var $toc = $('<ul class="nav level-0" >').addClass("nav sidenav");

    var base_level = 1;
    while ($content.find('h' + base_level).length < 1 && base_level < 7) base_level += 1;
    if (base_level == 7) return null;

    $content.find(':header').each(function (i) {
      var $this = $(this);
      $this.attr('id', i);

      var level = parseInt(this.nodeName.substr(1));
      var offset = level - base_level;

      var li = new $('<li/>')
          .append('<a href="#' + i + '" class="animate">' + $this.text() + '</a>')
          .append($('<ul class="nav level-'+(offset+1)+'"/>'));

      $('<div>').append($toc).find('ul.level-'+offset+':last').append(li);
    });
    // remove empty ul
    $toc.find('ul').not(':parent').remove();
    return $toc;
  }
</script>

<!-- latex render begin -->
<script type="text/x-mathjax-config">  
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [ ['$','$'] ],
            displayMath: [ ['$$$','$$$'] ]
        }
    });
    MathJax.Hub.Queue(function () {
        $('body').scrollspy('refresh'); 
    });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<!-- latex render end -->





  </div>
</div>


  </div>
</div>
<div id="footer">
  <div class="container-fluid">
    <div class="credit nowrap">
      <p class="text-muted" title="Copyright © 2015 Tokinonagare. Hosted by GitHub and powered by Jekyll.">
        Copyright © 2015
        <a href="//tokinonagare.github.io">Tokinonagare</a>. Hosted by
        <a href="//github.com/" target="_blank">GitHub</a>
        and powered by
        <a href="//jekyllrb.com/">Jekyll</a>.

      </p>
            <span class="pull-right hidden-xs follow">
                <a href="//github.com/tokinonagare/tokinonagare.github.io" target="_blank"> <i class="fa fa-github fa-lg"></i>
                </a>
            </span>
    </div>
  </div>
</div>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="//oss.maxcdn.com/libs/html5shiv/3.6.2/html5shiv.js"></script>
<script src="//v3.bootcss.com/docs-assets/js/respond.min.js"></script>
<![endif]-->
<script src="/assets/lib/jquery/jquery.scrollUp.min.js"></script>
<script src="/assets/lib/jquery/jquery.lazyload.min.js" type="text/javascript"></script>
<script src="/assets/lib/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<script>
  var footHeight = $('#footer').outerHeight(true);
  $(function () {
    

      //激活工具提示
      $('[data-toggle="tooltip"]').tooltip();

      //图片延迟加载
      $("img.lazy").lazyload({effect: "fadeIn", skip_invisible: false});	//bootstrap thumbnail img will be invisible at the begining

      //回到顶部按钮
      $.scrollUp({
        scrollName: 'scrollUp', topDistance: '300', topSpeed: 300, animation: 'fade', animationInSpeed: 500,
        animationOutSpeed: 500, scrollText: '', activeOverlay: false,
      });

      //页面内链接滑动效果
      $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');
      $('a.animate').click(function () {
        if ($(this).attr('offset')) {
          offset += parseInt($(this).attr('offset'));
        }
        $body.animate({scrollTop: $($(this).attr('href')).offset().top}, 500);
        return false;
      });
    });
</script>
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-45491170-1', 'tokinonagare.github.io');
  ga('send', 'pageview');
</script>

</body>
</html>
